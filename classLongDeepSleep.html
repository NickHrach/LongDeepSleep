<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LongDeepSleep: LongDeepSleep Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LongDeepSleep
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classLongDeepSleep.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classLongDeepSleep-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">LongDeepSleep Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A class for managing long deep sleep cycles with RTC memory and optimized WiFi reconnection on ESP8266.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="LongDeepSleep_8h_source.html">LongDeepSleep.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa9a51fd51f7b5ca36c086a468435a020" id="r_aa9a51fd51f7b5ca36c086a468435a020"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="#aa9a51fd51f7b5ca36c086a468435a020a0fe9b44de5599e807a8a272a716e6d85">DEEP_SLEEP_DONE</a> = 0
, <a class="el" href="#aa9a51fd51f7b5ca36c086a468435a020a0f209f592d231b3ffc7769c5b0bc735b">DEEP_SLEEP_UNTIL_DONE</a> = 1
, <a class="el" href="#aa9a51fd51f7b5ca36c086a468435a020a62a5696e9b80f63a58b7676a5be7b3da">OTHER_WAKE_UP_REASON</a> = -1
, <a class="el" href="#aa9a51fd51f7b5ca36c086a468435a020a5aa9f5c9abad1beb79f06a3e7fe8d694">RTC_MEMORY_CHECK_FAILED</a> = -2
, <br />
&#160;&#160;<a class="el" href="#aa9a51fd51f7b5ca36c086a468435a020a33fe53440476486d87219d19a2ab1845">ABSOLUTE_TIME_CHECK_FAILED</a> = -3
<br />
 }</td></tr>
<tr class="memdesc:aa9a51fd51f7b5ca36c086a468435a020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return codes for <a class="el" href="#a7f5e0058d88d99a884535a1d60e39933" title="Checks whether the device woke up from deep sleep and handles state.">checkWakeUp()</a>.  <a href="#aa9a51fd51f7b5ca36c086a468435a020">More...</a><br /></td></tr>
<tr class="separator:aa9a51fd51f7b5ca36c086a468435a020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb23d719b5ad4ebc141e0dec022d91d8" id="r_acb23d719b5ad4ebc141e0dec022d91d8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="#acb23d719b5ad4ebc141e0dec022d91d8a0707d313ec293a6178dd8bc35866181c">OK</a> = 0
, <a class="el" href="#acb23d719b5ad4ebc141e0dec022d91d8ade1b2431c9d5397e0b9483b26968b274">NO_TIME_CLIENT</a> = -1
, <a class="el" href="#acb23d719b5ad4ebc141e0dec022d91d8a28bf0324ff9eb0fb3232f73c2b57aa2a">NO_ABSOLUE_TIME_AVAILABLE</a> = -2
, <a class="el" href="#acb23d719b5ad4ebc141e0dec022d91d8a06ae519336714df58ee503e4e44abdb4">SPECIFIED_TIME_IN_PAST</a> = 1
 }</td></tr>
<tr class="memdesc:acb23d719b5ad4ebc141e0dec022d91d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return codes for performLongDeepSleepUntil(int).  <a href="#acb23d719b5ad4ebc141e0dec022d91d8">More...</a><br /></td></tr>
<tr class="separator:acb23d719b5ad4ebc141e0dec022d91d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f8dfa601ab11fce2155a5c990f0c188" id="r_a7f8dfa601ab11fce2155a5c990f0c188"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188">CloneWorkaround</a> { <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188a416ad6245954c009acc4b9ea42bf0e8e">NO_WORKAROUND</a> = 0
, <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188a228291577066775b830bf3f29cd13ebc">WEMOS_D1_V3_CLONE</a> = 1
, <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188a717ec60a92d8a5c9f337eeac180aa294">ESP01_MODULE</a> = 2
, <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188a17d558a001931ec1387933d7cf832112">UNKNOWN</a> = 3
 }</td></tr>
<tr class="memdesc:a7f8dfa601ab11fce2155a5c990f0c188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Differrent types of workarounds for deepsleep problems with clone modules.  <a href="#a7f8dfa601ab11fce2155a5c990f0c188">More...</a><br /></td></tr>
<tr class="separator:a7f8dfa601ab11fce2155a5c990f0c188"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a33a81db0c12deb7c88b7a53edeb37579" id="r_a33a81db0c12deb7c88b7a53edeb37579"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a33a81db0c12deb7c88b7a53edeb37579">LongDeepSleep</a> (<a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188">CloneWorkaround</a> param_cloneWorkaround, const char *ssid=nullptr, const char *password=nullptr, NTPClient *ntpClient=nullptr)</td></tr>
<tr class="memdesc:a33a81db0c12deb7c88b7a53edeb37579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second constructor for clone modules with deep sleep problems.  <br /></td></tr>
<tr class="separator:a33a81db0c12deb7c88b7a53edeb37579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb325848f6d267fbf536e4f829eaa76e" id="r_adb325848f6d267fbf536e4f829eaa76e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adb325848f6d267fbf536e4f829eaa76e">LongDeepSleep</a> (const char *ssid=nullptr, const char *password=nullptr, NTPClient *ntpClient=nullptr)</td></tr>
<tr class="memdesc:adb325848f6d267fbf536e4f829eaa76e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:adb325848f6d267fbf536e4f829eaa76e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f5e0058d88d99a884535a1d60e39933" id="r_a7f5e0058d88d99a884535a1d60e39933"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f5e0058d88d99a884535a1d60e39933">checkWakeUp</a> (uint32_t toleranceSec=0, uint16_t failureSleepSecs=0)</td></tr>
<tr class="memdesc:a7f5e0058d88d99a884535a1d60e39933"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the device woke up from deep sleep and handles state.  <br /></td></tr>
<tr class="separator:a7f5e0058d88d99a884535a1d60e39933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fa585fa7e7447bfb30ff17bc402f361" id="r_a3fa585fa7e7447bfb30ff17bc402f361"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fa585fa7e7447bfb30ff17bc402f361">performLongDeepSleep</a> (uint64_t sleepTimeSec)</td></tr>
<tr class="memdesc:a3fa585fa7e7447bfb30ff17bc402f361"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep for a relative amount of time (seconds).  <br /></td></tr>
<tr class="separator:a3fa585fa7e7447bfb30ff17bc402f361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade938e3f1f1b6eed5b769a332cd02db6" id="r_ade938e3f1f1b6eed5b769a332cd02db6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade938e3f1f1b6eed5b769a332cd02db6">performLongDeepSleepUntil</a> (uint64_t epocheTime)</td></tr>
<tr class="memdesc:ade938e3f1f1b6eed5b769a332cd02db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleep until an absolute epoch time.  <br /></td></tr>
<tr class="separator:ade938e3f1f1b6eed5b769a332cd02db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b63c1e7e6b26fbc6637cff529107ec" id="r_a62b63c1e7e6b26fbc6637cff529107ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62b63c1e7e6b26fbc6637cff529107ec">restoreWifi</a> (uint16_t failureSleepSecs=0)</td></tr>
<tr class="memdesc:a62b63c1e7e6b26fbc6637cff529107ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores WiFi after wake-up from deep sleep.  <br /></td></tr>
<tr class="separator:a62b63c1e7e6b26fbc6637cff529107ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3cc516e05aec48e29f98223d7b6f2d" id="r_a8c3cc516e05aec48e29f98223d7b6f2d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8c3cc516e05aec48e29f98223d7b6f2d">releaseWifi</a> ()</td></tr>
<tr class="memdesc:a8c3cc516e05aec48e29f98223d7b6f2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases WiFi to conserve power.  <br /></td></tr>
<tr class="separator:a8c3cc516e05aec48e29f98223d7b6f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a323f34840d9238460ed8ee7c47558cb5" id="r_a323f34840d9238460ed8ee7c47558cb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a323f34840d9238460ed8ee7c47558cb5">changeWaitCycles</a> (uint16_t quickConnectCycles, uint16_t wifiWaitCycles)</td></tr>
<tr class="memdesc:a323f34840d9238460ed8ee7c47558cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Customizes connection wait cycles.  <br /></td></tr>
<tr class="separator:a323f34840d9238460ed8ee7c47558cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1ef470e30dd4757e7715c852e96449a" id="r_ab1ef470e30dd4757e7715c852e96449a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab1ef470e30dd4757e7715c852e96449a">rebootCounter</a> ()</td></tr>
<tr class="memdesc:ab1ef470e30dd4757e7715c852e96449a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a number that is increased in each call of checkWakeUp and also saved in RTC memory.  <br /></td></tr>
<tr class="separator:ab1ef470e30dd4757e7715c852e96449a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6bd3741a47f619348fba23b4d1346c8" id="r_ac6bd3741a47f619348fba23b4d1346c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6bd3741a47f619348fba23b4d1346c8">resetRebootCounter</a> (uint32_t resetValue=0)</td></tr>
<tr class="memdesc:ac6bd3741a47f619348fba23b4d1346c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the reboot counter to any other value.  <br /></td></tr>
<tr class="separator:ac6bd3741a47f619348fba23b4d1346c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4aed9dfb5966cf309bc34f6755547a87" id="r_a4aed9dfb5966cf309bc34f6755547a87"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4aed9dfb5966cf309bc34f6755547a87">UsedRTCDataSize</a> ()</td></tr>
<tr class="memdesc:a4aed9dfb5966cf309bc34f6755547a87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns RTC memory size used by this library.  <br /></td></tr>
<tr class="separator:a4aed9dfb5966cf309bc34f6755547a87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class for managing long deep sleep cycles with RTC memory and optimized WiFi reconnection on ESP8266. </p>
<p>This class allows deep sleep durations beyond the hardware-imposed ~3.5-hour limit by using RTC memory to persist sleep state between wake-ups. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa9a51fd51f7b5ca36c086a468435a020" name="aa9a51fd51f7b5ca36c086a468435a020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9a51fd51f7b5ca36c086a468435a020">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return codes for <a class="el" href="#a7f5e0058d88d99a884535a1d60e39933" title="Checks whether the device woke up from deep sleep and handles state.">checkWakeUp()</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa9a51fd51f7b5ca36c086a468435a020a0fe9b44de5599e807a8a272a716e6d85" name="aa9a51fd51f7b5ca36c086a468435a020a0fe9b44de5599e807a8a272a716e6d85"></a>DEEP_SLEEP_DONE&#160;</td><td class="fielddoc"><p>Wake-up completed, proceed. WiFi not yet restored. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9a51fd51f7b5ca36c086a468435a020a0f209f592d231b3ffc7769c5b0bc735b" name="aa9a51fd51f7b5ca36c086a468435a020a0f209f592d231b3ffc7769c5b0bc735b"></a>DEEP_SLEEP_UNTIL_DONE&#160;</td><td class="fielddoc"><p>Wake-up completed, WiFi and time server already available. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9a51fd51f7b5ca36c086a468435a020a62a5696e9b80f63a58b7676a5be7b3da" name="aa9a51fd51f7b5ca36c086a468435a020a62a5696e9b80f63a58b7676a5be7b3da"></a>OTHER_WAKE_UP_REASON&#160;</td><td class="fielddoc"><p>Wake-up due to other reason (reset, power-on, etc.). </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9a51fd51f7b5ca36c086a468435a020a5aa9f5c9abad1beb79f06a3e7fe8d694" name="aa9a51fd51f7b5ca36c086a468435a020a5aa9f5c9abad1beb79f06a3e7fe8d694"></a>RTC_MEMORY_CHECK_FAILED&#160;</td><td class="fielddoc"><p>RTC memory is invalid or corrupted. </p>
</td></tr>
<tr><td class="fieldname"><a id="aa9a51fd51f7b5ca36c086a468435a020a33fe53440476486d87219d19a2ab1845" name="aa9a51fd51f7b5ca36c086a468435a020a33fe53440476486d87219d19a2ab1845"></a>ABSOLUTE_TIME_CHECK_FAILED&#160;</td><td class="fielddoc"><p>Wake-up for absolute time failed due to time server/WiFi issues. </p>
</td></tr>
</table>

</div>
</div>
<a id="acb23d719b5ad4ebc141e0dec022d91d8" name="acb23d719b5ad4ebc141e0dec022d91d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb23d719b5ad4ebc141e0dec022d91d8">&#9670;&#160;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return codes for performLongDeepSleepUntil(int). </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="acb23d719b5ad4ebc141e0dec022d91d8a0707d313ec293a6178dd8bc35866181c" name="acb23d719b5ad4ebc141e0dec022d91d8a0707d313ec293a6178dd8bc35866181c"></a>OK&#160;</td><td class="fielddoc"><p>Will never be seen as then the ESP will go into deep sleep. </p>
</td></tr>
<tr><td class="fieldname"><a id="acb23d719b5ad4ebc141e0dec022d91d8ade1b2431c9d5397e0b9483b26968b274" name="acb23d719b5ad4ebc141e0dec022d91d8ade1b2431c9d5397e0b9483b26968b274"></a>NO_TIME_CLIENT&#160;</td><td class="fielddoc"><p>No time client specified when creating class longdeepsleep, hence this function is not available. </p>
</td></tr>
<tr><td class="fieldname"><a id="acb23d719b5ad4ebc141e0dec022d91d8a28bf0324ff9eb0fb3232f73c2b57aa2a" name="acb23d719b5ad4ebc141e0dec022d91d8a28bf0324ff9eb0fb3232f73c2b57aa2a"></a>NO_ABSOLUE_TIME_AVAILABLE&#160;</td><td class="fielddoc"><p>time client was specified, but it was not possible to determine an absolute time, hence this function is not available. </p>
</td></tr>
<tr><td class="fieldname"><a id="acb23d719b5ad4ebc141e0dec022d91d8a06ae519336714df58ee503e4e44abdb4" name="acb23d719b5ad4ebc141e0dec022d91d8a06ae519336714df58ee503e4e44abdb4"></a>SPECIFIED_TIME_IN_PAST&#160;</td><td class="fielddoc"><p>The specified until time stamp lies in the past, hence sleep not required, do whatever you want to do then. </p>
</td></tr>
</table>

</div>
</div>
<a id="a7f8dfa601ab11fce2155a5c990f0c188" name="a7f8dfa601ab11fce2155a5c990f0c188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f8dfa601ab11fce2155a5c990f0c188">&#9670;&#160;</a></span>CloneWorkaround</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188">LongDeepSleep::CloneWorkaround</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Differrent types of workarounds for deepsleep problems with clone modules. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a7f8dfa601ab11fce2155a5c990f0c188a416ad6245954c009acc4b9ea42bf0e8e" name="a7f8dfa601ab11fce2155a5c990f0c188a416ad6245954c009acc4b9ea42bf0e8e"></a>NO_WORKAROUND&#160;</td><td class="fielddoc"><p>This is standard solution, no workaround is applied. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7f8dfa601ab11fce2155a5c990f0c188a228291577066775b830bf3f29cd13ebc" name="a7f8dfa601ab11fce2155a5c990f0c188a228291577066775b830bf3f29cd13ebc"></a>WEMOS_D1_V3_CLONE&#160;</td><td class="fielddoc"><p>This worked for my Wemos D1 mini V3 clones. </p>
</td></tr>
<tr><td class="fieldname"><a id="a7f8dfa601ab11fce2155a5c990f0c188a717ec60a92d8a5c9f337eeac180aa294" name="a7f8dfa601ab11fce2155a5c990f0c188a717ec60a92d8a5c9f337eeac180aa294"></a>ESP01_MODULE&#160;</td><td class="fielddoc"><p>esp01 modules, not tested yet. Just copy/pasted code from here: <a href="https://github.com/nokxs/esp8266-alternative-deep-sleep">https://github.com/nokxs/esp8266-alternative-deep-sleep</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="a7f8dfa601ab11fce2155a5c990f0c188a17d558a001931ec1387933d7cf832112" name="a7f8dfa601ab11fce2155a5c990f0c188a17d558a001931ec1387933d7cf832112"></a>UNKNOWN&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a33a81db0c12deb7c88b7a53edeb37579" name="a33a81db0c12deb7c88b7a53edeb37579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a81db0c12deb7c88b7a53edeb37579">&#9670;&#160;</a></span>LongDeepSleep() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LongDeepSleep::LongDeepSleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188">CloneWorkaround</a></td>          <td class="paramname"><span class="paramname"><em>param_cloneWorkaround</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ssid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>password</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NTPClient *</td>          <td class="paramname"><span class="paramname"><em>ntpClient</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Second constructor for clone modules with deep sleep problems. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_cloneWorkaround.</td><td>This is to selected the clone workaround. Use one of the enums form <a class="el" href="#a7f8dfa601ab11fce2155a5c990f0c188" title="Differrent types of workarounds for deepsleep problems with clone modules.">CloneWorkaround</a>. </td></tr>
    <tr><td class="paramname">ssid</td><td>WiFi SSID. (optional in case no absolute time for deep sleep is required.) </td></tr>
    <tr><td class="paramname">password</td><td>WiFi password. (optional in case no absolute time for deep sleep is required.) </td></tr>
    <tr><td class="paramname">ntpClient</td><td>pointer to a configured NTPClient instance. (optional in case no absolute time for deep sleep is rquired.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adb325848f6d267fbf536e4f829eaa76e" name="adb325848f6d267fbf536e4f829eaa76e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb325848f6d267fbf536e4f829eaa76e">&#9670;&#160;</a></span>LongDeepSleep() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LongDeepSleep::LongDeepSleep </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>ssid</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>password</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NTPClient *</td>          <td class="paramname"><span class="paramname"><em>ntpClient</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ssid</td><td>WiFi SSID. (optional in case no absolute time for deep sleep is required.) </td></tr>
    <tr><td class="paramname">password</td><td>WiFi password. (optional in case no absolute time for deep sleep is required.) </td></tr>
    <tr><td class="paramname">ntpClient</td><td>pointer to a configured NTPClient instance. (optional in case no absolute time for deep sleep is rquired.) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a323f34840d9238460ed8ee7c47558cb5" name="a323f34840d9238460ed8ee7c47558cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a323f34840d9238460ed8ee7c47558cb5">&#9670;&#160;</a></span>changeWaitCycles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LongDeepSleep::changeWaitCycles </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>quickConnectCycles</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>wifiWaitCycles</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Customizes connection wait cycles. </p>
<p>One cycle is 10 ms. Default is 20/2000 = 200ms/20s. It's not recommended to change these values, but funciton is provided for completeness.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">quickConnectCycles</td><td>Max cycles to reconnect via saved BSSID/channel. </td></tr>
    <tr><td class="paramname">wifiWaitCycles</td><td>Max cycles to establish normal WiFi. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7f5e0058d88d99a884535a1d60e39933" name="a7f5e0058d88d99a884535a1d60e39933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f5e0058d88d99a884535a1d60e39933">&#9670;&#160;</a></span>checkWakeUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LongDeepSleep::checkWakeUp </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>toleranceSec</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>failureSleepSecs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether the device woke up from deep sleep and handles state. </p>
<p>Depending on prior sleep configuration, may re-enter deep sleep if targeted sleep time is not elapsed (relative) or reached (absolute).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toleranceSec</td><td>Allowed wake-up deviation in seconds (in case woke up a little bit earlier.) </td></tr>
    <tr><td class="paramname">failureSleepSecs</td><td>If &gt;0, sleep this long again when wifi connection or time server (only if specified) update fails. This parameter is only relevant in case we got with performLongDeepSleepUntil method into deep sleep and woke up to get into this function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>One of the enum codes above. </dd></dl>

</div>
</div>
<a id="a3fa585fa7e7447bfb30ff17bc402f361" name="a3fa585fa7e7447bfb30ff17bc402f361"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fa585fa7e7447bfb30ff17bc402f361">&#9670;&#160;</a></span>performLongDeepSleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LongDeepSleep::performLongDeepSleep </td>
          <td>(</td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>sleepTimeSec</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep for a relative amount of time (seconds). </p>
<p>Deep sleep is broken into cycles of up to ~3.5 hours.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sleepTimeSec</td><td>Time to sleep in seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade938e3f1f1b6eed5b769a332cd02db6" name="ade938e3f1f1b6eed5b769a332cd02db6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade938e3f1f1b6eed5b769a332cd02db6">&#9670;&#160;</a></span>performLongDeepSleepUntil()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int LongDeepSleep::performLongDeepSleepUntil </td>
          <td>(</td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>epocheTime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleep until an absolute epoch time. </p>
<p>Requires a wifi connection and an updated NTPClient with valid time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">epocheTime</td><td>Target epoch time (in seconds). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab1ef470e30dd4757e7715c852e96449a" name="ab1ef470e30dd4757e7715c852e96449a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1ef470e30dd4757e7715c852e96449a">&#9670;&#160;</a></span>rebootCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LongDeepSleep::rebootCounter </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a number that is increased in each call of checkWakeUp and also saved in RTC memory. </p>
<p>In case you want to know how often the ESP reboots until you manually reset the counter, you can get the current value via this function. The counter is increased by one every time the constructor of this class is called after the value was restored from RTC memory. Please note that you need to manually reset the value by function <a class="el" href="#ac6bd3741a47f619348fba23b4d1346c8" title="Resets the reboot counter to any other value.">resetRebootCounter()</a> whenever you need to. </p>

</div>
</div>
<a id="a8c3cc516e05aec48e29f98223d7b6f2d" name="a8c3cc516e05aec48e29f98223d7b6f2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c3cc516e05aec48e29f98223d7b6f2d">&#9670;&#160;</a></span>releaseWifi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LongDeepSleep::releaseWifi </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases WiFi to conserve power. </p>
<p>Saves connection state to RTC for fast reconnect. Might be used by users in their part, when a larger part might be executed without WiFi and energy consumption is really critical. Otherwise this is called automatically within the performLongDeepSleep-functions. </p>

</div>
</div>
<a id="ac6bd3741a47f619348fba23b4d1346c8" name="ac6bd3741a47f619348fba23b4d1346c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6bd3741a47f619348fba23b4d1346c8">&#9670;&#160;</a></span>resetRebootCounter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LongDeepSleep::resetRebootCounter </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>resetValue</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resets the reboot counter to any other value. </p>
<p>This function resets an internal counter to a specified value. Default is zero. The counter is increased by one every time the constructor of this class is called after the value was restored from RTC memory. </p>

</div>
</div>
<a id="a62b63c1e7e6b26fbc6637cff529107ec" name="a62b63c1e7e6b26fbc6637cff529107ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62b63c1e7e6b26fbc6637cff529107ec">&#9670;&#160;</a></span>restoreWifi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LongDeepSleep::restoreWifi </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>failureSleepSecs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores WiFi after wake-up from deep sleep. </p>
<p>Optimizes for minimal connection time. Falls back to deep sleep if reconnect fails.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">failureSleepSecs</td><td>If &gt;0, sleep this long again when wifi connection or time server (only if specified) update fails. Users might need to call this as it's only automatically called when woken up the last time after the system went into deep sleep via function performLongDeepSleepUntil. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4aed9dfb5966cf309bc34f6755547a87" name="a4aed9dfb5966cf309bc34f6755547a87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aed9dfb5966cf309bc34f6755547a87">&#9670;&#160;</a></span>UsedRTCDataSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t LongDeepSleep::UsedRTCDataSize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns RTC memory size used by this library. </p>
<p>Returns the size of the RTC memory that is used internally. You can use this to offset your own RTC memory usage in case you need to store something else to survive reboots. Be aware that the workarounds for weak ESP8266 modules need another 4 bytes of memory. They are using the same function as well. You might have a look into file <a class="el" href="CloneDeepSleepWorkaround_8cpp.html">CloneDeepSleepWorkaround.cpp</a> for a hint how to use it. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="LongDeepSleep_8h_source.html">LongDeepSleep.h</a></li>
<li>src/<a class="el" href="LongDeepSleep_8cpp.html">LongDeepSleep.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classLongDeepSleep.html">LongDeepSleep</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
